<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Katherine Lannen" />


<title>Crop Yields in Africa 1961 - 2018</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>






<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Spatial Data Discovery</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Learning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="learning/hdf/index.html">HDF</a>
    </li>
    <li>
      <a href="learning/netcdf/index.html">NetCDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="resources-code.html">Code</a>
    </li>
    <li>
      <a href="resources-data.html">Data</a>
    </li>
    <li>
      <a href="resources-links.html">Links</a>
    </li>
    <li>
      <a href="resources-methods.html">Methods</a>
    </li>
    <li>
      <a href="resources-software.html">Software</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Spatial Discovery
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Example</li>
    <li>
      <a href="project-dtwoods.html">Breathing of the Biosphere</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="current-projects.html">Current Projects</a>
    </li>
    <li>
      <a href="projects.html">All Projects</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about-dtwoods.html">About the Professor</a>
    </li>
    <li>
      <a href="schedule.html">Current Schedule</a>
    </li>
    <li>
      <a href="syllabus.html">Current Syllabus</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="current-development-team.html">Current Developers</a>
    </li>
    <li>
      <a href="about.html">All Developers</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/spatial-data-discovery/spatial-data-discovery.github.io">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Crop Yields in Africa 1961 - 2018</h1>

</div>


<!-- VIDEO ON LOOP: see styles.css for formatting -->
<div class="video-wrapper">
<p><video class="video-4x4mw" controls preload="true" autoplay loop muted> <source src="https://drdavis.space/teaching/ds/sdd/media/2020/11/total_crop_yields_africa.mp4" type="video/mp4" > </video> <video class="video-4x4mw" controls preload="true" autoplay loop muted> <source src="https://drdavis.space/teaching/ds/sdd/media/2020/11/specified_crop_yields_africa.mp4" type="video/mp4" > </video></p>
</div>
<blockquote>
<p>Crop Yields are in hg/ha. The specified crops are groundnuts, wheat, cereals, cassava, millet, and maize.</p>
</blockquote>
<div id="overview" class="section level2">
<h2>Overview</h2>
<p>Agriculture and its transformation plays a role in the economy and development process of countries and can affect the general wellbeing and poverty level of individuals within those countries.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The types and amount of crops grown can also be used to infer information about that country’s development, wellbeing, and even predict how it will continue to grow due to agriculture having high correlation with other variables.</p>
<p>Crop Yields represent the harvested production per unit of harvested area for crop products and are typically recorded in hectograms (100 grammes) per hectare (HG/HA).<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Crop yields typically increase with the use of better tools and methods of farming along with improved crop varieties. These larger crop yields translate into the farmers being able to sell more surplus crops and thus boosting the economy and supporting more development. However, crop yields also are affected by the weather and climate they are growing in these factors have been changing due to climate change and global warming. As such the agricultural sector has to moderate the impacts of climate change while producing their crops. “A number of studies anticipate a reduction of the crop yield of the main staple food crops in the region in the coming decades due to global warming.”<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>As agriculture and crop yields can help with the understanding and prediction of a variety of factors, it is helpful to see how crop yields have changed over time to see if general patterns exist. I decided to create an animation showing the changes in crop yields across different countries in Africa where a lot of development has been happening between the years of 1961 and 2018. This animation can help with general understandings of certain trends and can be referenced when trying to study specific cases of growth. To also give a basic start to looking at how climate change has potentially impacted countries I included precipitation data for approximately every 5 years for those same countries in Africa.</p>
</div>
<div id="data-description" class="section level2">
<h2>Data Description</h2>
<p>There are three different datasets used for this project and animation. These three datasets combined contain the overall information of the geometry of the different countries in Africa, the crop yields for those countries split out into their respective crop type, and the average precipitation in depth for those countries. I will go into each of these more in depth down below. Overall, I created an R script to read in these different files and produce an HTML file that contains the animation of the crop yields and the precipitation amount for each year from 1961 to 2018.</p>
<p>The first dataset was that which contained the geometry of the different countries in Africa and was in a geojson format.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> It contained the variables cartodb_id, geometry, adm0_a3 (shortened country names), name (county’s full names), created_at (date), updated_at (date) but I only used the name and geometry variables. This dataset was going to be used as the basis for the mapping of the other information and only contained that basic information. As such the only value changes I made to it was in the names as there were slight differences in how some country names were written between the data sets and I wanted to merge them based on this field. A slight change I made in the script itself was when it read in this geojson file it converts it to an sf object.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> This conversion was because I am more familiar with how to use and plot sf objects in R than I am for geojson objects.</p>
<p>The second dataset was where the majority of the information for this project came from. It was from the Food and Agriculture Organization of the United Nations and I was able to download crop yield information for each year from 1961-2018 in all African countries from the bulk downloads Africa for crop production.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> This file contained more variables than the others with Area Code, Area (Country name), Item Code, Item (Crop type), Element (area harvest, crop yield, production, unit (ha, hg/ha, tonnes), a variable to represent each year and another to contain any flags for that particular year. However, I only ended up using Area, Item, Element, Unit and the variables that represented the values for each year (I did not use the flags). For this dataset I did have to do some formatting after reading in the csv file. The first thing I did was change all the N/A values to zero. The next couple of things I did were filtering the data so that I only had rows whose element was crop yields, this in turn also made it so unit was all in hg/ha. I also got rid of the columns that I wasn’t going to be using at all. After that I decided to do two different things for the data the first being aggregating the data so that I had the total crop yields for all of the different crops per year for each country. This was so I could see overall changes in agriculture. The second thing was filtering the item (crop type) so that I only was aggregating the crop yields per country for each year for groundnuts, wheat, cereals, cassava, millet, and maize. I selected these particular crop types as they are some of the major crops grown in Africa.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> From there I also altered the Area (country names) to match that of the first dataset and then I merged the two different versions of crop yields to that data set so I could show the yields on the map of Africa.</p>
<p>The third dataset was a xlsx file I downloaded from The World Bank after filtering the data on their website to include all the years it had the data for and all the countries that I was looking at for this project.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> This file contained the names of the countries and the average precipitation data in mm for each year. Though I was using this data for the full-time frame of 1961 - 2018, this data set only had the values for about every 5 years of that timeframe. As such I decided to show the precipitation data for the year that it was first recorded and update it whenever it changed values. I did do some manual editing of this file before loading it into R but it was mainly deleting unneeded rows or things similar to that. I did finish formatting this file after I read it into R by finishing selecting only the columns that had data and updating the names of the countries to match how it was in the geometry and crop yields datasets. Finally, I merged this information into both versions of the crop yields and geometry data frame.</p>
<p>After formatting and combining the above data sets into two different versions (total_crop_yield and selected_crop_yield) I moved onto the visualization. For the visualization I decided to go with an animation that showed the changes in crop yields and precipitation data for each year. As the focus of this project is on crop yields, I decided to create a graph for each year that plotted the geometry of the Africa countries and shaded them based off a crop yield scale.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> For this scale I decided to preset the limits (min and max) as well as the midpoint so that the shading and key would be consistent across the years and comparing different year’s graphs would therefore also be easier. I determine what these values should be I looked at the two different versions and their respective values. The next thing I added was labels that identified which country was what and also noted the average precipitation levels in mm underneath those names. Finally, I used the animation package to create an HTML file (and its associated files and folders) that animated the different graphs across the years. Due to those associated files and folders to see each version based off the html file you do need to rerun that part of the script when switching back and forth.<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> However, to create the videos you see above, I just screen recorded the html animation and then edited out parts of the video in an editor. Thank you to Professor Davis who finished cropping off some extra parts of the screen in the recording so you don’t see the browser’s search bar.</p>
<div class="credit-line">
<p>Author: Katherine Lannen Last edited: 2020-11-20</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Nicolas Depetris Chauvin, Francis Mulangu and Guido Porto “Food Production and Consumption Trends in Sub-Saharan Africa: Prospects for the Transformation of the Agricultural Sector.” Accessed 2020-11-19. Online: <a href="file:///C:/Users/User/Downloads/Food%20Production%20and%20Consumption%20(1).pdf" class="uri">file:///C:/Users/User/Downloads/Food%20Production%20and%20Consumption%20(1).pdf</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>FAOSTAT - Food and Agriculture Organization of the United Nations (FAO). Accessed 2020-11-18. Online: <a href="http://www.fao.org/faostat/en/#data/QC" class="uri">http://www.fao.org/faostat/en/#data/QC</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Benjamin Sultan, Dimitri Defrance &amp; Toshichika Iizumi “Evidence of crop production losses in West Africa due to historical global warming in two crop models.” Accessed 2020-11-20. Online: <a href="https://www.nature.com/articles/s41598-019-49167-0" class="uri">https://www.nature.com/articles/s41598-019-49167-0</a><a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>African countries. Carto. Accessed 2020-11-18 Online: <a href="https://common-data.carto.com/tables/africa_adm0/public" class="uri">https://common-data.carto.com/tables/africa_adm0/public</a><a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>D. Cooley “Converting between GeoJSON and sf.” Accessed 2020-11-18. Online: <a href="https://cran.r-project.org/web/packages/geojsonsf/vignettes/geojson-sf-conversions.html" class="uri">https://cran.r-project.org/web/packages/geojsonsf/vignettes/geojson-sf-conversions.html</a><a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>FAOSTAT - Food and Agriculture Organization of the United Nations (FAO). Accessed 2020-11-18. Online: <a href="http://www.fao.org/faostat/en/#data/QC" class="uri">http://www.fao.org/faostat/en/#data/QC</a><a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>“Agricultural Opportunites in Africa” Deloitte, Oct. 2017. Accessed 2020-11-19. Online: <a href="https://www2.deloitte.com/content/dam/Deloitte/za/Documents/africa/DeloitteZA_Agricultural_opportunites_in_Africa_Oct2017-updated.pdf" class="uri">https://www2.deloitte.com/content/dam/Deloitte/za/Documents/africa/DeloitteZA_Agricultural_opportunites_in_Africa_Oct2017-updated.pdf</a><a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>Databank, World Development Indicators - The World Bank. Accessed 2020-11-19. Online: <a href="https://databank.worldbank.org/reports.aspx?source=2&amp;series=AG.LND.PRCP.MM&amp;country=" class="uri">https://databank.worldbank.org/reports.aspx?source=2&amp;series=AG.LND.PRCP.MM&amp;country=</a><a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>“scale_colour_gradient” RDocumentation. Accessed 2020-11-19. Online: <a href="https://www.rdocumentation.org/packages/ggplot2/versions/1.0.0/topics/scale_colour_gradient" class="uri">https://www.rdocumentation.org/packages/ggplot2/versions/1.0.0/topics/scale_colour_gradient</a><a href="#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>Animation. Online: <a href="https://cran.r-project.org/web/packages/animation/index.html" class="uri">https://cran.r-project.org/web/packages/animation/index.html</a><a href="#fnref10" class="footnote-back">↩</a></p></li>
</ol>
</div>

<footer class="myfoot">
    <div class="foot-text">
        <p>Data Science at William &amp; Mary (2020)</p>
    </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
