<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Jamil Abbas" />


<title>United States Crisis Monitor</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Spatial Data Discovery</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Learning
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="learning/hdf/index.html">HDF</a>
    </li>
    <li>
      <a href="learning/netcdf/index.html">NetCDF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="resources-code.html">Code</a>
    </li>
    <li>
      <a href="resources-data.html">Data</a>
    </li>
    <li>
      <a href="resources-links.html">Links</a>
    </li>
    <li>
      <a href="resources-methods.html">Methods</a>
    </li>
    <li>
      <a href="resources-software.html">Software</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Spatial Discovery
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Example</li>
    <li>
      <a href="project-dtwoods.html">Breathing of the Biosphere</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="current-projects.html">Current Projects</a>
    </li>
    <li>
      <a href="projects.html">All Projects</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="about-dtwoods.html">About the Professor</a>
    </li>
    <li>
      <a href="schedule.html">Current Schedule</a>
    </li>
    <li>
      <a href="syllabus.html">Current Syllabus</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="current-development-team.html">Current Developers</a>
    </li>
    <li>
      <a href="about.html">All Developers</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/spatial-data-discovery/spatial-data-discovery.github.io">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">United States Crisis Monitor</h1>

</div>


<blockquote>
<p><em>“If there is no struggle, there is no progress.”</em> – Frederick Douglass</p>
</blockquote>
<div id="project-significance" class="section level2">
<h2>Project Significance</h2>
<p>The purpose behind visualizing the United States crisis data was to help illustrate the magnitude of unrest that occurred throughout 2020, and the possible severity of the ramifications. The Armed Conflict Location and Event Data Project (ACLED)<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> has labeled this the “crisis” dataset which seems severe at first. Recalling the simultaneous downfalls resulting from a contracting economy in the midst of the COVID-19 pandemic, and from having a presidential election in a very divided setting, it seems justifiable to label this period of time a crisis. Visualizing the scope of turnout for political violence and demonstration through this era of heightened risk and an ongoing pandemic is also an opportunity to showcase the benefits of visualizing spatial data.</p>
</div>
<div id="data-visualization" class="section level2">
<h2>Data Visualization</h2>
<!-- VIDEO ON LOOP: see styles.css for formatting -->
<div class="video-wrapper">
<p><video id="scaledvideo" controls preload="true" autoplay loop muted> <source src="https://drdavis.space/teaching/ds/sdd/media/2020/11/total_us_blm.mp4" type="video/mp4" > </video></p>
</div>
</div>
<div id="data-summary" class="section level2">
<h2>Data Summary</h2>
<p>The data was collected from the US Crisis Monitor dataset that was collected by the ACLED<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. They describe political violence and demonstrations as either: battles, protests, riots, strategic developments, or violence against civilians. The data set records all instances of violence or demonstration in addition with their longitude and latitude points and some notes given the specifics of the event. This made the visualization easier as all the manipulations would be done to the data set, and let the programs generate the maps. First off, the original data set is given as an Excel spreadsheet<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. It was best to convert the data set to a comma separated variable (CSV)<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> data set, so that the manipulations could be done utilizing pandas<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> in python. After converting to a CSV, the next step was to create data sets that contained parts of the total data set so that separate maps could be created and put together to create the final animation. Utilizing datetime<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>, the script written writes new CSV files containing 40 day increasing increments of the date, since the total data set spans over 160 days there is a total of 4 new data files written.</p>
<p>After having the data files, the next step is to create heat maps of the partitioned data sets. Given that the data contained longitude and latitude points already, QGIS<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> can create a heatmap of the data set. Given the nature of the data set, assigning an equal weight to all the events and simply illustrating the volume of events was the most efficient metric. There is an argument to be made that peaceful protests should hold a lesser weight than protests that turned violent, or some other metric should be involved to account for the severity of the event. One of the possible metrics was fatalities, as fatalities is a variable in the data set. Assigning a higher weight to events that incurred higher fatalities would have done essentially nothing to the final visualization as all events incurred less than 3 fatalities, with a large majority incurring 0. The specifics of this data set lead us to understand that the most value we will get from the visualization is illustrating the magnitude at which these events took place.</p>
<p>Once the heatmaps were created in QGIS, and saved as images (.png). The images are taken into GIMP <a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> in which they are turned into a .gif<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. After GIMP exports the gif file, an MP4<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> is generated using an online converter<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>.</p>
</div>
<div id="code" class="section level2">
<h2>Code</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Author: Jamil Abbas</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># Last Updated: 2020-11-08</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#Script Description:</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#This script takes in the US Crisis Monitor data as a .csv file and writes 4 new .csv</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#files each containing the total data points by increasing 40 day intervals.</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#The first file written includes the datapoints corresponding to the first 40 days of the data,</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#the next file includes datapoints corresponding to the first 80 days of the data and so on.</span></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="co">#####################</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co"># REQUIRED MODULES  #</span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#####################</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta</a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb1-17" title="17"><span class="im">import</span> argparse</a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19"><span class="co">#####################</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="co"># Global Variables  #</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="co">#####################</span></a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="kw">def</span> split_write_csv(fpath):</a>
<a class="sourceLine" id="cb1-25" title="25">    <span class="co">&#39;&#39;&#39;</span></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="co">    Name: split_write_csv</span></a>
<a class="sourceLine" id="cb1-27" title="27"><span class="co">    Inputs: str, absolute filepath to the .csv dataset (fpath)</span></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co">    Objective: Imports the .csv dataset as a pandas dataframe and then manipulates the data</span></a>
<a class="sourceLine" id="cb1-29" title="29"><span class="co">    dataframe and timedelta object to write four new .csv files containing the total data based on</span></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="co">    40 day increments.</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="co">    &#39;&#39;&#39;</span></a>
<a class="sourceLine" id="cb1-32" title="32">    <span class="cf">if</span> fpath.endswith(<span class="st">&#39;.csv&#39;</span>) <span class="op">==</span> <span class="va">True</span>: <span class="co">#Error handling</span></a>
<a class="sourceLine" id="cb1-33" title="33"></a>
<a class="sourceLine" id="cb1-34" title="34">        <span class="co">#Import the data as a pandas dataframe</span></a>
<a class="sourceLine" id="cb1-35" title="35">        rawdata <span class="op">=</span> pd.read_csv(fpath)</a>
<a class="sourceLine" id="cb1-36" title="36"></a>
<a class="sourceLine" id="cb1-37" title="37">        <span class="co">#Adjust the dates in the dataframe to follow the format that datetime uses (YYYY-MM-DD)</span></a>
<a class="sourceLine" id="cb1-38" title="38">        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(rawdata)):</a>
<a class="sourceLine" id="cb1-39" title="39">            date_arr <span class="op">=</span> rawdata.loc[i , <span class="st">&quot;EVENT_DATE&quot;</span>]</a>
<a class="sourceLine" id="cb1-40" title="40">            date_arr <span class="op">=</span> date_arr.split(<span class="st">&#39;-&#39;</span>)</a>
<a class="sourceLine" id="cb1-41" title="41">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;May&#39;</span>:</a>
<a class="sourceLine" id="cb1-42" title="42">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;5&#39;</span></a>
<a class="sourceLine" id="cb1-43" title="43">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;June&#39;</span>:</a>
<a class="sourceLine" id="cb1-44" title="44">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;6&#39;</span></a>
<a class="sourceLine" id="cb1-45" title="45">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;July&#39;</span>:</a>
<a class="sourceLine" id="cb1-46" title="46">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;7&#39;</span></a>
<a class="sourceLine" id="cb1-47" title="47">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;August&#39;</span>:</a>
<a class="sourceLine" id="cb1-48" title="48">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;8&#39;</span></a>
<a class="sourceLine" id="cb1-49" title="49">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;September&#39;</span>:</a>
<a class="sourceLine" id="cb1-50" title="50">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;9&#39;</span></a>
<a class="sourceLine" id="cb1-51" title="51">            <span class="cf">if</span> date_arr[<span class="dv">1</span>] <span class="op">==</span> <span class="st">&#39;October&#39;</span>:</a>
<a class="sourceLine" id="cb1-52" title="52">                date_arr[<span class="dv">1</span>] <span class="op">=</span> <span class="st">&#39;10&#39;</span></a>
<a class="sourceLine" id="cb1-53" title="53"></a>
<a class="sourceLine" id="cb1-54" title="54">            adj_date <span class="op">=</span> date_arr[<span class="dv">2</span>] <span class="op">+</span> <span class="st">&#39;-&#39;</span> <span class="op">+</span> date_arr[<span class="dv">1</span>] <span class="op">+</span> <span class="st">&#39;-&#39;</span> <span class="op">+</span> date_arr[<span class="dv">0</span>]</a>
<a class="sourceLine" id="cb1-55" title="55">            rawdata[<span class="st">&quot;EVENT_DATE&quot;</span>][i] <span class="op">=</span> adj_date</a>
<a class="sourceLine" id="cb1-56" title="56"></a>
<a class="sourceLine" id="cb1-57" title="57">        <span class="co">#Seperate data into segments by 40 days and create a raster containing the total</span></a>
<a class="sourceLine" id="cb1-58" title="58">        <span class="co">#data until that segment</span></a>
<a class="sourceLine" id="cb1-59" title="59"></a>
<a class="sourceLine" id="cb1-60" title="60">        <span class="bu">print</span>(<span class="st">&#39;---------------------Processing Data---------------------&#39;</span>)</a>
<a class="sourceLine" id="cb1-61" title="61"></a>
<a class="sourceLine" id="cb1-62" title="62">        <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">5</span>):</a>
<a class="sourceLine" id="cb1-63" title="63">            end_date <span class="op">=</span> datetime(<span class="dv">2020</span>,<span class="dv">10</span>,<span class="dv">31</span>) <span class="co">#Set datetime variable for the last date of the data</span></a>
<a class="sourceLine" id="cb1-64" title="64">            temp_frame <span class="op">=</span> rawdata.copy()</a>
<a class="sourceLine" id="cb1-65" title="65">            x<span class="op">=</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-66" title="66">            <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(rawdata)):</a>
<a class="sourceLine" id="cb1-67" title="67">                temp_date <span class="op">=</span> rawdata[<span class="st">&quot;EVENT_DATE&quot;</span>][i].split(<span class="st">&#39;-&#39;</span>)</a>
<a class="sourceLine" id="cb1-68" title="68">                <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(temp_date)):</a>
<a class="sourceLine" id="cb1-69" title="69">                    temp_date[j] <span class="op">=</span> <span class="bu">int</span>(temp_date[j])</a>
<a class="sourceLine" id="cb1-70" title="70">                temp_date <span class="op">=</span> datetime(<span class="dv">2020</span> , temp_date[<span class="dv">1</span>], temp_date[<span class="dv">2</span>])</a>
<a class="sourceLine" id="cb1-71" title="71">                date_diff <span class="op">=</span> end_date <span class="op">-</span> temp_date</a>
<a class="sourceLine" id="cb1-72" title="72">                <span class="cf">if</span> date_diff <span class="op">&gt;=</span> timedelta(days<span class="op">=</span><span class="dv">160</span><span class="op">-</span>(<span class="dv">40</span><span class="op">*</span>k)):</a>
<a class="sourceLine" id="cb1-73" title="73">                    x <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-74" title="74">            temp_frame <span class="op">=</span> temp_frame.iloc[<span class="dv">0</span>:x, :]</a>
<a class="sourceLine" id="cb1-75" title="75">            file_name <span class="op">=</span> <span class="st">&#39;40_day_segment&#39;</span> <span class="op">+</span> <span class="bu">str</span>(k) <span class="op">+</span> <span class="st">&#39;.csv&#39;</span></a>
<a class="sourceLine" id="cb1-76" title="76">            temp_frame.to_csv(file_name, header<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb1-77" title="77"></a>
<a class="sourceLine" id="cb1-78" title="78"></a>
<a class="sourceLine" id="cb1-79" title="79">        <span class="bu">print</span>(<span class="st">&#39;---------------------Data Files Successfully Created---------------------&#39;</span>)</a>
<a class="sourceLine" id="cb1-80" title="80"></a>
<a class="sourceLine" id="cb1-81" title="81">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb1-82" title="82">        <span class="cf">raise</span> <span class="pp">TypeError</span>(<span class="st">&#39;Invalid file input. Filetype must be &lt;.csv&gt;&#39;</span>)</a>
<a class="sourceLine" id="cb1-83" title="83"></a>
<a class="sourceLine" id="cb1-84" title="84"></a>
<a class="sourceLine" id="cb1-85" title="85"><span class="co">#########</span></a>
<a class="sourceLine" id="cb1-86" title="86"><span class="co"># Main  #</span></a>
<a class="sourceLine" id="cb1-87" title="87"><span class="co">#########</span></a>
<a class="sourceLine" id="cb1-88" title="88"><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</a>
<a class="sourceLine" id="cb1-89" title="89"></a>
<a class="sourceLine" id="cb1-90" title="90">    description <span class="op">=</span> <span class="st">&quot;This script takes in the US Crisis Monitor data as a .csv file and writes 4 new </span><span class="ch">\n</span><span class="st"> .csv files each containing the total data points by increasing 40 day intervals. The </span><span class="ch">\n</span><span class="st"> first file written includes the datapoints corresponding to the first 40 days of the data, </span><span class="ch">\n</span><span class="st"> the next file includes datapoints corresponding to the first 80 days of the data and so on.&quot;</span></a>
<a class="sourceLine" id="cb1-91" title="91"></a>
<a class="sourceLine" id="cb1-92" title="92">    parser <span class="op">=</span> argparse.ArgumentParser(description<span class="op">=</span>description)</a>
<a class="sourceLine" id="cb1-93" title="93">    args <span class="op">=</span> parser.parse_args()</a>
<a class="sourceLine" id="cb1-94" title="94"></a>
<a class="sourceLine" id="cb1-95" title="95">    filepath <span class="op">=</span> <span class="bu">input</span>(<span class="st">&#39;Enter the aboslute filepath to the Armed Conflict dataset: &#39;</span>)</a>
<a class="sourceLine" id="cb1-96" title="96">    <span class="co">#Example filepath:</span></a>
<a class="sourceLine" id="cb1-97" title="97">    <span class="co">#C:\Repositories\sdd\ay2021-1\project\jabbas\data\USA_2020_Oct31.csv</span></a>
<a class="sourceLine" id="cb1-98" title="98"></a>
<a class="sourceLine" id="cb1-99" title="99">    split_write_csv(filepath)</a></code></pre></div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Armed Conflict Location and Event Data Project, “US Crisis Monitor”, Accessed 2020-10-30, Online: <a href="https://acleddata.com/special-projects/us-crisis-monitor/" class="uri">https://acleddata.com/special-projects/us-crisis-monitor/</a><a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>ACLED<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>Excel<a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>CSV, Accessed 2020-11-20, Online: <a href="https://docs.fileformat.com/spreadsheet/csv/" class="uri">https://docs.fileformat.com/spreadsheet/csv/</a><a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>pandas, Accessed 2020-11-20, Online: <a href="https://pandas.pydata.org/" class="uri">https://pandas.pydata.org/</a><a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>datetime, Accessed 2020-11-20, Online: <a href="https://docs.python.org/3/library/datetime.html" class="uri">https://docs.python.org/3/library/datetime.html</a><a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>QGIS tutorials, “Creating Heatmaps (QGIS3)”, Accessed 2020-11-06, Online: <a href="https://www.qgistutorials.com/en/docs/3/creating_heatmaps.html" class="uri">https://www.qgistutorials.com/en/docs/3/creating_heatmaps.html</a><a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>GIMP, Accessed 2020-11-20, Online: <a href="https://www.gimp.org/downloads/" class="uri">https://www.gimp.org/downloads/</a><a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>Graphics Interchange Format (GIF). Copyright 1987–1990 CompuServe. Accessed 2019-11-20. Online: <a href="https://www.w3.org/Graphics/GIF/spec-gif89a.txt" class="uri">https://www.w3.org/Graphics/GIF/spec-gif89a.txt</a><a href="#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>Moving Picture Experts Group Standard 4 (MPEG-4). Standard developed by a working group of the International Organization for Standardization (ISO) and the International Electrotechnical Commission (IEC) joint technical committee. Accessed 2019-11-20. Online: <a href="https://mpeg.chiariglione.org/" class="uri">https://mpeg.chiariglione.org/</a><a href="#fnref10" class="footnote-back">↩</a></p></li>
<li id="fn11"><p>ezgif, Accessed 2020-11-20, Online: <a href="https://ezgif.com/gif-to-mp4" class="uri">https://ezgif.com/gif-to-mp4</a><a href="#fnref11" class="footnote-back">↩</a></p></li>
</ol>
</div>

<footer class="myfoot">
    <div class="foot-text">
        <p>Data Science at William &amp; Mary (2020)</p>
    </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
